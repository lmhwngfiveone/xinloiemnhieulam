<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üíå Tr√≤ ch∆°i xin l·ªói b·∫°n g√°i</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: "Inter", sans-serif;
      background-color: #f7e9f7;
    }
    .container {
      max-width: 600px;
      min-height: 500px;
      background-color: #ffffff;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
        0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    .heart-icon {
      font-size: 3rem;
      transition: transform 0.2s;
    }
    .heart-icon:hover {
      transform: scale(1.2);
    }
  </style>
</head>

<body class="flex items-center justify-center min-h-screen p-4">
  <div
    class="container rounded-2xl p-6 md:p-10 text-center flex flex-col justify-between"
  >
    <!-- M√†n h√¨nh gi·ªõi thi·ªáu -->
    <div id="intro-screen">
      <h1
        class="text-4xl md:text-5xl font-bold text-pink-500 mb-4 animate-pulse"
      >
        üíå "Anh xin l·ªói, ch∆°i game n√†y v·ªõi anh nha?"
      </h1>
      <p class="text-gray-600 text-lg md:text-xl leading-relaxed">
        "Anh bi·∫øt m√¨nh ƒë√£ l√†m em bu·ªìn üòî. Anh t·∫°o tr√≤ ch∆°i n√†y ƒë·ªÉ xin l·ªói em v√†
        l√†m em c∆∞·ªùi l·∫°i. Em ch∆°i v·ªõi anh nha ‚ù§Ô∏è."
      </p>
      <button
        onclick="nextQuestion()"
        class="mt-8 px-8 py-4 bg-pink-500 text-white font-bold rounded-full shadow-lg hover:bg-pink-600 transition duration-300 transform hover:scale-105"
      >
        B·∫Øt ƒë·∫ßu
      </button>
    </div>

    <!-- M√†n h√¨nh c√¢u h·ªèi -->
    <div id="questions-container" class="hidden">
      <!-- C√¢u h·ªèi 1 -->
      <div id="question-1" class="question">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">
          üëâ Em c√≥ ƒëang gi·∫≠n anh kh√¥ng?
        </h2>
        <div class="flex flex-col space-y-4">
          <button
            onclick="nextQuestion()"
            class="px-6 py-4 bg-white text-gray-700 font-medium rounded-xl shadow-md border-2 border-pink-200 hover:bg-pink-100 transition duration-200"
          >
            C√≥ üò°
          </button>
          <button
            onclick="nextQuestion()"
            class="px-6 py-4 bg-white text-gray-700 font-medium rounded-xl shadow-md border-2 border-pink-200 hover:bg-pink-100 transition duration-200"
          >
            Ch∆∞a ch·∫Øc üòê
          </button>
          <button
            onclick="nextQuestion()"
            class="px-6 py-4 bg-white text-gray-700 font-medium rounded-xl shadow-md border-2 border-pink-200 hover:bg-pink-100 transition duration-200"
          >
            Kh√¥ng, t·∫°i anh d·ªÖ th∆∞∆°ng üòò
          </button>
        </div>
      </div>

      <!-- C√¢u h·ªèi 2 -->
      <div id="question-2" class="question hidden">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">
          üëâ Ch·ªçn tr√°i tim n√†o l√† c·∫£m x√∫c c·ªßa em l√∫c n√†y?
        </h2>
        <div class="flex justify-around items-center">
          <button onclick="nextQuestion()" class="heart-icon">‚ù§Ô∏è</button>
          <button onclick="nextQuestion()" class="heart-icon">üíñ</button>
          <button onclick="nextQuestion()" class="heart-icon">üíî</button>
          <button onclick="nextQuestion()" class="heart-icon">üíò</button>
        </div>
      </div>

      <!-- C√¢u h·ªèi 3 -->
      <div id="question-3" class="question hidden">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">
          üëâ Em mu·ªën anh l√†m g√¨ ƒë·ªÉ b√π ƒë·∫Øp?
        </h2>
        <textarea
          id="apology-wish"
          class="w-full h-32 p-4 border-2 border-pink-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400 resize-none"
          placeholder="H√£y n√≥i ra nh·ªØng g√¨ em mu·ªën..."
        ></textarea>
        <button
          onclick="nextQuestion()"
          class="mt-6 px-8 py-4 bg-pink-500 text-white font-bold rounded-full shadow-lg hover:bg-pink-600 transition duration-300"
        >
          Ti·∫øp theo
        </button>
      </div>

      <!-- C√¢u h·ªèi cu·ªëi -->
      <div id="question-4" class="question hidden">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">
          üëâ Em h√£y nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m·ªü l·ªùi xin l·ªói b√≠ m·∫≠t
        </h2>
        <p class="text-gray-500 text-sm mb-4">
          G·ª£i √Ω: M·∫≠t kh·∫©u l√† t√™n em ‚ù§Ô∏è
        </p>
        <input
          type="text"
          id="password-input"
          class="w-2/3 md:w-1/2 px-4 py-3 text-center border-2 border-pink-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400"
          placeholder="Nh·∫≠p t√™n em"
        />
        <div id="feedback-message" class="mt-4 text-sm font-semibold hidden"></div>
        <button
          onclick="checkPassword()"
          class="mt-6 px-8 py-4 bg-pink-500 text-white font-bold rounded-full shadow-lg hover:bg-pink-600 transition duration-300"
        >
          M·ªü kh√≥a
        </button>
      </div>
    </div>

    <!-- M√†n h√¨nh l·ªùi xin l·ªói -->
    <div id="apology-message-screen" class="hidden">
      <h2 class="text-4xl font-bold text-pink-500 mb-6 animate-pulse">
        üíå Anh xin l·ªói!
      </h2>
      <p class="text-gray-700 text-xl leading-relaxed">
        "Anh xin l·ªói v√¨ ƒë√£ l√†m em bu·ªìn. Anh h·ª©a s·∫Ω kh√¥ng t√°i ph·∫°m v√† s·∫Ω y√™u em
        nhi·ªÅu h∆°n n·ªØa. Em tha l·ªói cho anh nha ‚ù§Ô∏è."
      </p>
    </div>
  </div>

  <!-- üí° Ph·∫ßn JavaScript -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const SECRET_PASSWORD = "Hong Thom"; // kh√¥ng d·∫•u ƒë·ªÉ an to√†n
      const FORMSPREE_ENDPOINT = "https://formspree.io/f/mldoyogr";

      let currentQuestion = 0;
      const answers = [];
      const questions = document.querySelectorAll(".question");
      const introScreen = document.getElementById("intro-screen");
      const questionsContainer = document.getElementById("questions-container");
      const apologyMessageScreen = document.getElementById("apology-message-screen");

      function recordAnswer(q, a) {
        answers.push({ question: q, answer: a });
      }

      window.nextQuestion = function () {
        if (currentQuestion === 0) {
          introScreen.classList.add("hidden");
          questionsContainer.classList.remove("hidden");
        } else {
          const prev = questions[currentQuestion - 1];
          prev.classList.add("hidden");
          const h2 = prev.querySelector("h2");
          const txt = prev.querySelector("textarea");
          const sel = prev.querySelector("button.selected");
          let ans = "";
          if (txt) ans = txt.value.trim();
          else if (sel) ans = sel.innerText;
          if (ans) recordAnswer(h2 ? h2.innerText : "?", ans);
        }
        if (currentQuestion < questions.length) {
          questions[currentQuestion].classList.remove("hidden");
          currentQuestion++;
        }
      };

      document.querySelectorAll(".question button").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.target.parentElement.querySelectorAll("button").forEach((b) =>
            b.classList.remove("selected")
          );
          e.target.classList.add("selected");
        });
      });

      async function sendToFormspree() {
        console.log("üì§ G·ª≠i d·ªØ li·ªáu ƒë·∫øn Formspree...");
        try {
          const res = await fetch(FORMSPREE_ENDPOINT, {
            method: "POST",
            headers: { "Content-Type": "application/json", Accept: "application/json" },
            body: JSON.stringify({ answers, sent_at: new Date().toLocaleString() }),
          });
          if (res.ok) console.log("‚úÖ G·ª≠i th√†nh c√¥ng!");
          else console.error("‚ö†Ô∏è G·ª≠i th·∫•t b·∫°i:", res.statusText);
        } catch (e) {
          console.error("‚ùå L·ªói m·∫°ng:", e);
        }
      }

      window.checkPassword = function () {
        const input = document.getElementById("password-input").value.trim();
        const feedback = document.getElementById("feedback-message");
        recordAnswer("Password", input);

        if (input.toLowerCase() === SECRET_PASSWORD.toLowerCase()) {
          questionsContainer.classList.add("hidden");
          apologyMessageScreen.classList.remove("hidden");
          recordAnswer("Result", "‚úÖ Correct password");
          sendToFormspree();
        } else {
          feedback.textContent = "Sai m·∫≠t kh·∫©u r·ªìi, em th·ª≠ l·∫°i nh√©!";
          feedback.classList.remove("hidden");
          feedback.classList.add("text-red-600");
          recordAnswer("Result", "‚ùå Wrong password");
        }
      };
    });
  </script>
</body>
</html>
